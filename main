--[[
    W31rd.Hub - Gold Farming V1.2 (PHOTO MATCH EDITION)
    Tasarım: Ekran görüntüsü referans alınarak birebir yapıldı.
    Özellikler: 
    - Birebir UI Tasarımı (RGB Renkler)
    - Auto Farm (Bypasslı)
    - Anti-AFK (Oyundan atılmayı önler)
    - İstatistik Takibi
]]

-- 1. ESKİ UI TEMİZLİĞİ VE GÜVENLİ YERLEŞİM
local targetParent = nil
local success, err = pcall(function() targetParent = game:GetService("CoreGui") end)
if not success or not targetParent then
    targetParent = game:GetService("Players").LocalPlayer:WaitForChild("PlayerGui")
end

if targetParent:FindFirstChild("W31rdHubRemake") then
    targetParent.W31rdHubRemake:Destroy()
end

-- 2. SERVİSLER VE DEĞİŞKENLER
local Players = game:GetService("Players")
local LocalPlayer = Players.LocalPlayer
local TweenService = game:GetService("TweenService")
local RunService = game:GetService("RunService")
local VirtualUser = game:GetService("VirtualUser")

-- Global Kontroller
_G.AutoFarm = true
local ChestsCollected = 0
local StartGold = 0
local StartTime = os.time()

-- Veri Yüklenmesini Bekle
repeat task.wait() until LocalPlayer:FindFirstChild("Data") and LocalPlayer.Data:FindFirstChild("gold")
StartGold = LocalPlayer.Data.gold.Value

-- 3. UI OLUŞTURMA (FOTOĞRAFA GÖRE BİREBİR TASARIM)
local ScreenGui = Instance.new("ScreenGui")
local MainFrame = Instance.new("Frame")
local UICorner = Instance.new("UICorner")
local Title = Instance.new("TextLabel")
local Underline = Instance.new("Frame") -- Başlığın altındaki çizgi
local StatsContainer = Instance.new("Frame") -- İstatistiklerin düzgün durması için
local CurrentGoldLabel = Instance.new("TextLabel")
local GainedGoldLabel = Instance.new("TextLabel")
local ChestsLabel = Instance.new("TextLabel")
local TimeLabel = Instance.new("TextLabel")
local WebhookLabel = Instance.new("TextLabel")
local DiscordBtn = Instance.new("TextButton")
local BtnCorner = Instance.new("UICorner")

-- Renk Paleti (Fotoğraftan Alındı)
local Colors = {
    Background = Color3.fromRGB(22, 23, 31), -- Çok koyu lacivert/siyah
    TitleBlue = Color3.fromRGB(88, 166, 255),
    GoldYellow = Color3.fromRGB(255, 204, 0),
    GainGreen = Color3.fromRGB(50, 255, 80), -- Neon yeşil
    ChestOrange = Color3.fromRGB(255, 150, 0),
    TimeCyan = Color3.fromRGB(100, 210, 255),
    WebhookRed = Color3.fromRGB(200, 80, 80),
    ButtonBlue = Color3.fromRGB(65, 130, 255)
}

-- ScreenGui Ayarları
ScreenGui.Name = "W31rdHubRemake"
ScreenGui.Parent = targetParent
ScreenGui.IgnoreGuiInset = true
ScreenGui.ResetOnSpawn = false

-- Ana Çerçeve
MainFrame.Name = "MainBackground"
MainFrame.Parent = ScreenGui
MainFrame.BackgroundColor3 = Colors.Background
MainFrame.Position = UDim2.new(0.5, -125, 0.5, -135) -- Ortalı
MainFrame.Size = UDim2.new(0, 250, 0, 270)
MainFrame.BorderSizePixel = 0
MainFrame.Active = true
MainFrame.Draggable = true -- Sürükleme özelliği

UICorner.CornerRadius = UDim.new(0, 10)
UICorner.Parent = MainFrame

-- Başlık
Title.Parent = MainFrame
Title.BackgroundTransparency = 1
Title.Position = UDim2.new(0, 15, 0, 10)
Title.Size = UDim2.new(1, -30, 0, 25)
Title.Font = Enum.Font.GothamBold
Title.Text = "W31rd.Hub • Gold Farming • V1.2"
Title.TextColor3 = Colors.TitleBlue
Title.TextSize = 14
Title.TextXAlignment = Enum.TextXAlignment.Left

-- Alt Çizgi (Mavi)
Underline.Parent = MainFrame
Underline.BackgroundColor3 = Colors.TitleBlue
Underline.BorderSizePixel = 0
Underline.Position = UDim2.new(0, 15, 0, 38)
Underline.Size = UDim2.new(1, -30, 0, 1)

-- Label Yardımcı Fonksiyonu (Renkleri ve Fontları ayarlayan)
local function createStatLabel(text, color, yPos)
    local lbl = Instance.new("TextLabel")
    lbl.Parent = MainFrame
    lbl.BackgroundTransparency = 1
    lbl.Position = UDim2.new(0, 15, 0, yPos)
    lbl.Size = UDim2.new(1, -30, 0, 25)
    lbl.Font = Enum.Font.GothamBold -- Fotoğraftaki kalın font
    lbl.Text = text
    lbl.TextColor3 = color
    lbl.TextSize = 18
    lbl.TextXAlignment = Enum.TextXAlignment.Left
    return lbl
end

-- İstatistikler (Fotoğraftaki sıraya göre)
CurrentGoldLabel = createStatLabel("Current Gold: Loading...", Colors.GoldYellow, 50)
GainedGoldLabel = createStatLabel("Gained Gold: 0", Colors.GainGreen, 80)
ChestsLabel = createStatLabel("Chests Collected: 0", Colors.ChestOrange, 110)
TimeLabel = createStatLabel("Total Time Farming: 00:00:00", Colors.TimeCyan, 140)

-- Webhook Yazısı (Kırmızı, küçük)
WebhookLabel.Parent = MainFrame
WebhookLabel.BackgroundTransparency = 1
WebhookLabel.Position = UDim2.new(0, 15, 0, 175)
WebhookLabel.Size = UDim2.new(1, -30, 0, 20)
WebhookLabel.Font = Enum.Font.SourceSans
WebhookLabel.Text = "Webhook: https://discord.gg/bQnXYAYTzF"
WebhookLabel.TextColor3 = Colors.WebhookRed
WebhookLabel.TextSize = 12
WebhookLabel.TextXAlignment = Enum.TextXAlignment.Left -- Fotoğrafta hafif solda duruyor gibi

-- Buton (Mavi, yuvarlak köşeli)
DiscordBtn.Parent = MainFrame
DiscordBtn.BackgroundColor3 = Colors.ButtonBlue
DiscordBtn.Position = UDim2.new(0, 15, 0, 210)
DiscordBtn.Size = UDim2.new(1, -30, 0, 40)
DiscordBtn.Font = Enum.Font.GothamBold
DiscordBtn.Text = "Copy Discord Link"
DiscordBtn.TextColor3 = Color3.new(1, 1, 1)
DiscordBtn.TextSize = 16
DiscordBtn.AutoButtonColor = true

BtnCorner.CornerRadius = UDim.new(0, 8)
BtnCorner.Parent = DiscordBtn

-- 4. FONKSİYONLAR (MANTIK)

-- Sayı Formatlama (Örn: 1,450)
local function formatNumber(n)
    return tostring(n):reverse():gsub("%d%d%d", "%1,"):reverse():gsub("^,", "")
end

-- UI Güncelleme
local function updateStats()
    local currentGold = LocalPlayer.Data.gold.Value
    local gained = currentGold - StartGold
    
    CurrentGoldLabel.Text = "Current Gold: " .. formatNumber(currentGold)
    GainedGoldLabel.Text = "Gained Gold: " .. formatNumber(gained)
    ChestsLabel.Text = "Chests Collected: " .. tostring(ChestsCollected)
    
    local diff = os.difftime(os.time(), StartTime)
    local h = math.floor(diff / 3600)
    local m = math.floor((diff % 3600) / 60)
    local s = diff % 60
    TimeLabel.Text = string.format("Total Time Farming: %02d:%02d:%02d", h, m, s)
end

-- Buton Fonksiyonu
DiscordBtn.MouseButton1Click:Connect(function()
    if setclipboard then
        setclipboard("https://discord.gg/bQnXYAYTzF")
        DiscordBtn.Text = "Copied to Clipboard!"
        task.wait(2)
        DiscordBtn.Text = "Copy Discord Link"
    else
        DiscordBtn.Text = "Not Supported!"
        task.wait(2)
        DiscordBtn.Text = "Copy Discord Link"
    end
end)

-- Anti-AFK (Oyundan atılmayı engeller)
LocalPlayer.Idled:Connect(function()
    VirtualUser:CaptureController()
    VirtualUser:ClickButton2(Vector2.new())
end)

-- Teleport / Farm Fonksiyonu
local function tweenTo(cf)
    if not LocalPlayer.Character or not LocalPlayer.Character:FindFirstChild("HumanoidRootPart") then return end
    local hrp = LocalPlayer.Character.HumanoidRootPart
    
    -- Hız Hesaplama (Mesafe bazlı sabit hız)
    local dist = (hrp.Position - cf.Position).Magnitude
    local speed = 300 -- Studs per second (Çok hızlı olursa kick yiyebilirsin, bu güvenli)
    local time = dist / speed
    
    local tweenInfo = TweenInfo.new(time, Enum.EasingStyle.Linear)
    local tween = TweenService:Create(hrp, tweenInfo, {CFrame = cf})
    
    tween:Play()
    tween.Completed:Wait()
end

-- 5. ANA DÖNGÜ (AUTO FARM)
task.spawn(function()
    while _G.AutoFarm do
        pcall(function()
            if LocalPlayer.Character and LocalPlayer.Character:FindFirstChild("HumanoidRootPart") then
                local hrp = LocalPlayer.Character.HumanoidRootPart
                
                -- Karakteri hazırla (Çarpışmaları kapatma opsiyonel, burada sadece fly kullanıyoruz)
                hrp.Velocity = Vector3.new(0,0,0)
                
                -- Stage'leri Bul
                local stagesFolder = workspace:WaitForChild("BoatStages"):WaitForChild("NormalStages")
                
                -- 1'den 10'a kadar tüm stage'leri gez
                for i = 1, 10 do
                    local stageName = "CaveStage" .. i
                    local stage = stagesFolder:FindFirstChild(stageName)
                    
                    if stage then
                        local darknessPart = stage:FindFirstChild("DarknessPart")
                        if darknessPart then
                            -- Stage'in üstünden uç (Engellere takılmamak için Y+60)
                            tweenTo(darknessPart.CFrame * CFrame.new(0, 60, 0))
                        end
                    end
                end
                
                -- Son Bölge (Hazine)
                local endZone = workspace:WaitForChild("BoatStages"):WaitForChild("RetardZone") -- Oyunun içindeki isim bu, tuhaf ama gerçek
                local finalPart = endZone:FindFirstChild("FinalPart") -- Sandığa giden yol
                local chest = endZone:FindFirstChild("Chest") -- Sandığın kendisi
                
                if finalPart then
                    tweenTo(finalPart.CFrame * CFrame.new(0, 10, 0)) -- Son düzlüğe in
                    task.wait(1)
                    -- Sandığa doğru yürü/süzül
                    tweenTo(finalPart.CFrame * CFrame.new(0, -5, 80)) -- Sandığın tam üstüne
                    task.wait(2) -- Sandığın açılmasını bekle
                    ChestsCollected = ChestsCollected + 1
                end
                
                -- Respawn Ol (Döngü başa dönsün)
                LocalPlayer.Character:BreakJoints()
                task.wait(6) -- Yeniden doğma süresi
            end
        end)
        task.wait(1) -- Hata olursa spamlamaması için küçük bekleme
    end
end)

-- UI Güncelleme Döngüsü
RunService.RenderStepped:Connect(function()
    if MainFrame.Visible then
        updateStats()
    end
end)

print("W31rd.Hub V1.2 (Photo Match) Loaded!")
